
# Snowflake End-to-End Lifecycle Question Answers
| Topic                                      | Questions & Answers with Keywords / Short Answers                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Tools / Commands                                                                                                          | Keywords                                                                                               |
| ------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ |
| **1. Raw Data Ingestion**                  | **1.1** What’s raw data ingestion? → Moving data from sources to landing zone. *(Ingestion, Landing Zone)*<br>**1.2** Common source types? → Databases, SaaS, IoT, APIs, flat files. *(Databases, SaaS, IoT, APIs)*<br>**1.3** Common formats? → CSV, JSON, Parquet, Avro, ORC, XML, Excel. *(CSV, JSON, Parquet)*<br>**1.4** Where is landing zone usually hosted? → S3, Azure Blob, GCS. *(Cloud Storage)*<br>**1.5** How do you automate ingestion? → Snowpipe, event notifications, streaming connectors. *(Snowpipe, Events, Streaming)*<br>**1.6** How do you profile raw data on ingestion? → Sampling queries, QUERY\_HISTORY, INFORMATION\_SCHEMA. *(Profiling, Sampling)*<br>**1.7** How do you monitor ingestion performance? → Latency, throughput, error rates. *(Monitoring, Latency)*<br>**Trick Q:** How to ingest 200 GB CSV without file size limits? → Split into <16 MB compressed chunks. *(Chunking, File Size Limit)* | COPY INTO, Snowpipe, Kafka Connector, Fivetran, Airbyte                                                                   | Raw Data, Landing Zone, Streaming, Profiling, Performance Monitoring                                   |
| **2. Staging in Snowflake**                | **2.1** Why use staging? → Hold raw files pre-transformation. *(Buffer, Raw Files)*<br>**2.2** Internal vs external stage? → Internal: Snowflake-managed; External: Cloud storage. *(Internal Stage, External Stage)*<br>**2.3** How is data parsed from stage? → FILE FORMAT defines parsing. *(File Format)*<br>**2.4** Can one stage point to multiple paths? → Yes, with directory structures. *(Multiple Paths)*<br>**2.5** How to check what’s in a stage? → `LIST @stage_name`. *(LIST Command)*<br>**2.6** How do you monitor staging performance? → COPY INTO history, load times, errors. *(Load Monitoring)*<br>**2.7** How can you optimize staging performance? → File compression, partitioning, optimal sizing. *(Compression, Partitioning)*<br>**Trick Q:** Files deleted from S3 after load available? → No, unless copied internally. *(Persistence)*                                                                     | CREATE STAGE, COPY INTO, CREATE FILE FORMAT, LIST                                                                         | Internal Stage, External Stage, File Format, Profiling, Performance Tuning                             |
| **3. Cleaning & Transformation (ELT/ETL)** | **3.1** ELT vs ETL difference? → ELT transforms inside warehouse; ETL before loading. *(ELT, ETL)*<br>**3.2** Examples of cleaning? → Null handling, trimming, deduplication. *(Null Handling, Deduplication)*<br>**3.3** Semi-structured handling? → VARIANT + FLATTEN. *(VARIANT, FLATTEN)*<br>**3.4** Common transformation tools? → dbt, PySpark, Glue. *(dbt, PySpark, Glue)*<br>**3.5** How do Streams & Tasks help? → Automate incremental transformations. *(Streams, Tasks)*<br>**3.6** How do you profile transformed data quality? → SQL checks on distributions, nulls, duplicates. *(Data Quality, Profiling)*<br>**3.7** How to optimize transformations? → Early filters, minimize shuffles, cluster keys. *(Optimization, Clustering)*<br>**Trick Q:** Deduplicate nested JSON arrays? → Flatten + DISTINCT or ROW\_NUMBER + re-aggregate. *(Deduplication, Flattening)*                                                     | dbt, Tasks, Streams, PySpark, Glue, Matillion                                                                             | ELT, ETL, VARIANT, FLATTEN, Data Quality, Profiling, Performance Tuning                                |
| **4. Query Parsing**                       | **4.1** First step running query? → Syntax check in Cloud Services layer. *(Syntax Check)*<br>**4.2** What’s privilege validation? → Role-based access check. *(RBAC)*<br>**4.3** What is object resolution? → Map table/view names to objects. *(Object Mapping)*<br>**4.4** How does query profiling help? → Identify parsing bottlenecks, privilege failures. *(Profiling, Bottlenecks)*<br>**4.5** How to optimize parsing? → Simplify queries, use parameterized statements. *(Query Simplification)*<br>**Trick Q:** Query can parse but still fail? → Runtime errors (div/0, type mismatch). *(Runtime Errors)*                                                                                                                                                                                                                                                                                                                       | —                                                                                                                         | Syntax Check, Object Resolution, RBAC, Profiling, Optimization                                         |
| **5. Query Optimization**                  | **5.1** How Snowflake chooses execution plan? → Cost-based optimizer. *(Cost-based Optimization)*<br>**5.2** Predicate pushdown example? → Filter before scanning partitions. *(Predicate Pushdown)*<br>**5.3** What is micro-partition pruning? → Skip irrelevant data blocks. *(Pruning)*<br>**5.4** When result cache used? → Same query + unchanged data. *(Result Cache)*<br>**5.5** How do you profile query performance? → QUERY\_HISTORY & QUERY\_PROFILE views. *(Query Profiling)*<br>**5.6** How to optimize queries? → Clustering keys, avoid SELECT \*, minimize scanned data. *(Query Optimization)*<br>**Trick Q:** Why pruning might fail? → Use of functions or expressions in filter. *(Filter Limitations)*                                                                                                                                                                                                               | —                                                                                                                         | Cost-based Optimizer, Predicate Pushdown, Micro-Partition Pruning, Query Profiling, Performance Tuning |
| **6. Query Execution**                     | **6.1** What executes queries? → Virtual Warehouse. *(Warehouse)*<br>**6.2** How is data processed? → Parallel MPP architecture. *(MPP)*<br>**6.3** Types of caching? → Result, local disk, metadata cache. *(Caching)*<br>**6.4** If warehouse suspended? → Query waits until resume. *(Warehouse Suspension)*<br>**6.5** How to tune performance? → Resize warehouse, clustering keys, cache warm-up, concurrency scaling. *(Performance Tuning)*<br>**6.6** Caches effect on performance? → Reduce IO, reuse results. *(Caching Benefits)*<br>**Trick Q:** Same query different runtimes? → Warehouse size, cache, clustering, concurrency. *(Runtime Variance)*                                                                                                                                                                                                                                                                          | —                                                                                                                         | Virtual Warehouse, MPP, Result Cache, Performance Tuning, Caching                                      |
| **7. Output & Consumption**                | **7.1** Where can query results go? → Client, table, external system. *(Results Destination)*<br>**7.2** How share data securely? → Secure Data Sharing. *(Secure Sharing)*<br>**7.3** Difference share vs reader account? → Share = existing Snowflake; Reader = no Snowflake account. *(Accounts)*<br>**7.4** How export data? → `COPY INTO` S3/Blob/GCS. *(Export)*<br>**7.5** How to profile output usage? → Access logs, usage metrics. *(Usage Profiling)*<br>**7.6** How optimize exports? → Compression, filtering, incremental exports. *(Export Optimization)*<br>**Trick Q:** Why fewer rows in export? → Filters, NULLs, failed writes. *(Export Issues)*                                                                                                                                                                                                                                                                        | COPY INTO, Secure Data Sharing                                                                                            | Secure Data Sharing, Reader Account, Profiling, Performance Tuning                                     |
| **8. Quick Reference Commands**            | **8.1** Command creating stage? → `CREATE STAGE`. *(CREATE STAGE)*<br>**8.2** Define file parsing rules? → `CREATE FILE FORMAT`. *(CREATE FILE FORMAT)*<br>**8.3** Parse arrays in JSON? → `FLATTEN()`. *(FLATTEN)*<br>**8.4** Monitor Snowpipe? → `SHOW PIPES`. *(SHOW PIPES)*<br>**8.5** Check query history? → Query `QUERY_HISTORY`. *(QUERY\_HISTORY)*<br>**8.6** Profile query performance? → Query `QUERY_PROFILE`. *(QUERY\_PROFILE)*<br>**Trick Q:** Snowpipe not ingest files? → Already processed or pattern mismatch. *(File Processing)*                                                                                                                                                                                                                                                                                                                                                                                        | CREATE STAGE, COPY INTO, CREATE FILE FORMAT, FLATTEN, ALTER PIPE, SHOW PIPES, SHOW STAGES, QUERY\_HISTORY, QUERY\_PROFILE | —                                                                                                      |
| **9. Keywords to Remember**                | **9.1** RAW → STAGE → CURATED *(Data Flow)*<br>**9.2** Internal/External Stage *(Stage Types)*<br>**9.3** VARIANT / FLATTEN *(Semi-structured Data)*<br>**9.4** ELT / ETL *(Transformation Style)*<br>**9.5** Cost-based Optimizer *(Query Planning)*<br>**9.6** Virtual Warehouse *(Compute)*<br>**9.7** Result Cache / Metadata Cache *(Caching)*<br>**9.8** Query Profiling (QUERY\_HISTORY, QUERY\_PROFILE) *(Profiling)*<br>**9.9** Performance Tuning (Warehouse Sizing, Clustering Keys) *(Tuning)*<br>**9.10** Data Profiling and Quality Checks *(Data Quality)*<br>**9.11** Caching (Result Cache, Local Disk Cache) *(Cache Types)*<br>**9.12** Concurrency Scaling *(Scaling)*<br>**9.13** Micro-Partition Pruning *(Pruning)*<br>**9.14** Secure Data Sharing / Reader Account *(Security)*                                                                                                                                     | —                                                                                                                         | Profiling, Performance Tuning, Caching, Optimization, Concurrency, Security                            |
